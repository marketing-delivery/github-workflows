name: 'Get API Domain'
description: 'Determines the API domain based on environment name'

inputs:
  env-name:
    description: 'Environment name (PROD, UAT, TEST, etc.)'
    required: true
  pr-number:
    description: 'Pull request number'
    required: true
  suffix:
    description: 'Suffix for the subdomain'
    required: true
  prefix:
    description: 'Prefix for the subdomain'
    required: false
  

outputs:
  subdomain:
    description: 'The determined API domain'
    value: ${{ steps.set-domain.outputs.subdomain }}

runs:
  using: 'composite'
  steps:
    - id: set-domain
      shell: bash
      run: |
        if [ "${{ inputs.env-name }}" = "PROD" ]; then
          echo "subdomain=${{ inputs.prefix }}.${{ inputs.suffix }}" >> $GITHUB_OUTPUT
        elif [ "${{ inputs.env-name }}" = "UAT" ]; then
          echo "subdomain=${{ inputs.prefix }}.uat.${{ inputs.suffix }}" >> $GITHUB_OUTPUT
        elif [ "${{ inputs.env-name }}" = "TEST" ]; then
          echo "subdomain=${{ inputs.prefix }}.test.${{ inputs.suffix }}" >> $GITHUB_OUTPUT
        elif [ "${{ inputs.env-name }}" = "FEATURE" ]; then
          echo "subdomain=${{ inputs.prefix }}.pr${{ inputs.pr-number }}.${{ inputs.suffix }}" >> $GITHUB_OUTPUT
        fi 